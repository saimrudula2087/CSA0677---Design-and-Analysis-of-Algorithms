#include <stdio.h>
#include <math.h>
int karatsuba(int x, int y) {
    if (x < 10 || y < 10) return x * y;

    int n = fmax(log10(x) + 1, log10(y) + 1);
    int m = n / 2;

    int high1 = x / pow(10, m);
    int low1 = x % (int)pow(10, m);
    int high2 = y / pow(10, m);
    int low2 = y % (int)pow(10, m);

    int z0 = karatsuba(low1, low2);
    int z1 = karatsuba((low1 + high1), (low2 + high2));
    int z2 = karatsuba(high1, high2);

    return z2 * pow(10, 2 * m) + (z1 - z2 - z0) * pow(10, m) + z0;
}

int main() {
    int x = 1234, y = 5678;
    printf("Product of %d and %d is %d\n", x, y, karatsuba(x, y));
    return 0;
}
